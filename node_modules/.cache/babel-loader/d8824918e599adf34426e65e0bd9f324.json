{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";//------------------------SPEECH RECOGNITION-----------------------------\n/* const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition\r\nconst recognition = new SpeechRecognition()\r\n\r\nrecognition.continous = true\r\nrecognition.interimResults = true\r\nrecognition.lang = 'fr-FR'*/ //------------------------COMPONENT-----------------------------\nvar Speech=/*#__PURE__*/function(_Component){_inherits(Speech,_Component);function Speech(){var _this;_classCallCheck(this,Speech);_this=_possibleConstructorReturn(this,_getPrototypeOf(Speech).call(this));_this.state={listening:false};_this.toggleListen=_this.toggleListen.bind(_assertThisInitialized(_this));_this.handleListen=_this.handleListen.bind(_assertThisInitialized(_this));return _this;}_createClass(Speech,[{key:\"toggleListen\",value:function toggleListen(){this.setState({listening:!this.state.listening},this.handleListen);}},{key:\"handleListen\",value:function handleListen(){var SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;var recognition=new SpeechRecognition();recognition.continous=true;recognition.interimResults=true;recognition.lang='fr-FR';console.log('listening?',this.state.listening);if(this.state.listening){recognition.start();recognition.onend=function(){console.log(\"...continue listening...\");recognition.start();};}else{recognition.stop();recognition.onend=function(){console.log(\"Stopped listening per click\");};}recognition.onstart=function(){console.log(\"Listening!\");};var finalTranscript='';recognition.onresult=function(event){var interimTranscript='';for(var i=event.resultIndex;i<event.results.length;i++){var transcript=event.results[i][0].transcript;if(event.results[i].isFinal)finalTranscript+=transcript+' ';else interimTranscript+=transcript;}document.getElementById('interim').innerHTML=interimTranscript;document.getElementById('final').innerHTML=finalTranscript;//*************Resultat******************* */\nif(interimTranscript==='suivant'){console.log(finalTranscript);document.getElementById('resultat').innerHTML=\"Bravo\";}//-------------------------COMMANDS------------------------------------\nvar transcriptArr=finalTranscript.split(' ');var stopCmd=transcriptArr.slice(-3,-1);console.log('stopCmd',stopCmd);if(stopCmd[0]==='stop'&&stopCmd[1]==='stop'){recognition.stop();recognition.onend=function(){console.log('Stopped listening per command');var finalText=transcriptArr.slice(0,-3).join(' ');document.getElementById('final').innerHTML=finalText;//document.getElementById('resultat').innerHTML = finalText \n};}};//-----------------------------------------------------------------------\nrecognition.onerror=function(event){console.log(\"Error occurred in recognition: \"+event.error);};}},{key:\"render\",value:function render(){return React.createElement(\"div\",{class:\"LoginBack\"},React.createElement(\"div\",{style:container},React.createElement(\"button\",{id:\"microphone-btn\",style:button,onClick:this.toggleListen}),React.createElement(\"div\",{id:\"interim\",style:interim}),React.createElement(\"div\",{id:\"final\",style:final}),React.createElement(\"div\",{id:\"resultat\",style:resultat})));}}]);return Speech;}(Component);//-------------------------CSS------------------------------------\nexport{Speech as default};var styles={container:{display:'flex',flexDirection:'column',alignItems:'center',textAlign:'center'},button:{width:'60px',height:'60px',background:'lightblue',borderRadius:'50%',margin:'6em 0 2em 0'},interim:{color:'gray',border:'#ccc 1px solid',padding:'1em',margin:'1em',width:'300px'},final:{color:'black',border:'#ccc 1px solid',padding:'1em',margin:'1em',width:'300px'},resultat:{color:'black',border:'#ccc 1px solid',padding:'1em',margin:'1em',width:'300px'}};var container=styles.container,button=styles.button,interim=styles.interim,final=styles.final,resultat=styles.resultat;","map":{"version":3,"sources":["C:/Users/Ouadie/IdeaProjects/SLT/SLT_Front/src/Composants/Speech.js"],"names":["React","Component","Speech","state","listening","toggleListen","bind","handleListen","setState","SpeechRecognition","window","webkitSpeechRecognition","recognition","continous","interimResults","lang","console","log","start","onend","stop","onstart","finalTranscript","onresult","event","interimTranscript","i","resultIndex","results","length","transcript","isFinal","document","getElementById","innerHTML","transcriptArr","split","stopCmd","slice","finalText","join","onerror","error","container","button","interim","final","resultat","styles","display","flexDirection","alignItems","textAlign","width","height","background","borderRadius","margin","color","border","padding"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\r\n\r\n//------------------------SPEECH RECOGNITION-----------------------------\r\n\r\n/* const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition\r\nconst recognition = new SpeechRecognition()\r\n\r\nrecognition.continous = true\r\nrecognition.interimResults = true\r\nrecognition.lang = 'fr-FR'*/\r\n\r\n\r\n//------------------------COMPONENT-----------------------------\r\n\r\nexport default class Speech extends Component {\r\n\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      listening: false\r\n    }\r\n    this.toggleListen = this.toggleListen.bind(this)\r\n    this.handleListen = this.handleListen.bind(this)\r\n  }\r\n\r\n  toggleListen() {\r\n    this.setState({\r\n      listening: !this.state.listening\r\n    }, this.handleListen)\r\n  }\r\n\r\n\r\n  handleListen() { \r\n\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition\r\n    const recognition = new SpeechRecognition()\r\n    \r\n    recognition.continous = true\r\n    recognition.interimResults = true\r\n    recognition.lang = 'fr-FR'\r\n\r\n    console.log('listening?', this.state.listening)\r\n\r\n    if (this.state.listening) {\r\n      \r\n      recognition.start()\r\n      recognition.onend = () => {\r\n        console.log(\"...continue listening...\")\r\n        recognition.start()\r\n      }\r\n\r\n    } else {\r\n      recognition.stop()\r\n      recognition.onend = () => {\r\n        console.log(\"Stopped listening per click\")\r\n      }\r\n    }\r\n\r\n    recognition.onstart = () => {\r\n      console.log(\"Listening!\")\r\n    }\r\n\r\n    let finalTranscript = ''\r\n    recognition.onresult = event => {\r\n      let interimTranscript = ''\r\n\r\n      for (let i = event.resultIndex; i < event.results.length; i++) {\r\n        const transcript = event.results[i][0].transcript;\r\n        if (event.results[i].isFinal) finalTranscript += transcript + ' ';\r\n        else interimTranscript += transcript;\r\n      }\r\n      document.getElementById('interim').innerHTML = interimTranscript\r\n      document.getElementById('final').innerHTML = finalTranscript\r\n     //*************Resultat******************* */\r\n      if(interimTranscript === 'suivant'){\r\n        console.log(finalTranscript);\r\n        document.getElementById('resultat').innerHTML = \"Bravo\"\r\n      }\r\n    //-------------------------COMMANDS------------------------------------\r\n\r\n      const transcriptArr = finalTranscript.split(' ')\r\n      const stopCmd = transcriptArr.slice(-3, -1)\r\n      console.log('stopCmd', stopCmd)\r\n\r\n      if (stopCmd[0] === 'stop' && stopCmd[1] === 'stop'){\r\n        recognition.stop()\r\n        recognition.onend = () => {\r\n          console.log('Stopped listening per command')\r\n          const finalText = transcriptArr.slice(0, -3).join(' ')\r\n          document.getElementById('final').innerHTML = finalText          \r\n          //document.getElementById('resultat').innerHTML = finalText \r\n        }\r\n      }\r\n    }\r\n    \r\n  //-----------------------------------------------------------------------\r\n    \r\n    recognition.onerror = event => {\r\n      console.log(\"Error occurred in recognition: \" + event.error)\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div class=\"LoginBack\">\r\n\r\n      <div style={container}>\r\n        <button id='microphone-btn' style={button} onClick={this.toggleListen} />\r\n        <div id='interim' style={interim}></div>\r\n        <div id='final' style={final}></div>\r\n        <div id='resultat' style={resultat}></div>\r\n\r\n      </div>\r\n      </div>\r\n\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\n//-------------------------CSS------------------------------------\r\n\r\nconst styles = {\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    textAlign: 'center'\r\n  },\r\n  button: {\r\n    width: '60px',\r\n    height: '60px',\r\n    background: 'lightblue',\r\n    borderRadius: '50%',\r\n    margin: '6em 0 2em 0'\r\n  },\r\n  interim: {\r\n    color: 'gray',\r\n    border: '#ccc 1px solid',\r\n    padding: '1em',\r\n    margin: '1em',\r\n    width: '300px'\r\n  },\r\n  final: {\r\n    color: 'black',\r\n    border: '#ccc 1px solid',\r\n    padding: '1em',\r\n    margin: '1em',\r\n    width: '300px'\r\n  },\r\n  resultat: {\r\n    color: 'black',\r\n    border: '#ccc 1px solid',\r\n    padding: '1em',\r\n    margin: '1em',\r\n    width: '300px'\r\n  }\r\n}\r\n\r\nconst { container, button, interim, final, resultat } = styles"]},"metadata":{},"sourceType":"module"}