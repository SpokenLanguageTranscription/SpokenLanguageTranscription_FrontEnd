{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _slicedToArray from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Form,FormGroup,Label,Input,Media,Table}from'reactstrap';import{Component}from'react';import Alert from'react-bootstrap/Alert';import NotificationAlert from'react-notification-alert';import'bootstrap/dist/css/bootstrap.min.css';import\"react-notification-alert/dist/animate.css\";import{Container,Row,Col}from'reactstrap';import\"../App.css\";import API from\"../Composants/API\";import{ButtonDropdown,DropdownToggle,DropdownMenu,DropdownItem}from'reactstrap';import Avatar from'react-avatar';var options1={};var options2={};options1={place:'tl',message:React.createElement(\"div\",null,React.createElement(\"div\",null,localStorage.getItem(\"success\"))),type:\"success\",icon:\"now-ui-icons ui-1_bell-53\",autoDismiss:4};options2={place:'tl',message:React.createElement(\"div\",null,React.createElement(\"div\",null,localStorage.getItem(\"error\"))),type:\"danger\",icon:\"now-ui-icons ui-1_bell-53\",autoDismiss:4};var TableDiscution=function TableDiscution(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),dropdownOpen=_useState2[0],setOpen=_useState2[1];var toggle=function toggle(){return setOpen(!dropdownOpen);};var row=props.row,auteur=props.auteur,phrase=props.phrase,date=props.date;return React.createElement(\"tr\",null,React.createElement(\"th\",{scope:\"row\",key:row,className:\"container\"},React.createElement(\"div\",{className:\"container\"},React.createElement(\"p\",null,\"  \",React.createElement(Avatar,{facebookId:\"100009606691669\",size:\"50\"}),\"\\xA0\\xA0\",auteur,\" : \",phrase),React.createElement(\"span\",{className:\"time-right\"},date,\" \"))));};var CompteForm=function CompteForm(props){var buttonLabel=props.buttonLabel,className=props.className,onChangeIdReunion=props.onChangeIdReunion,idReunion=props.idReunion,onChangeSujet=props.onChangeSujet,sujet=props.sujet,onChangeMail=props.onChangeMail,participants=props.participants,send=props.send;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modal=_useState4[0],setModal=_useState4[1];var toggle=function toggle(){return setModal(!modal);};return React.createElement(\"div\",null,React.createElement(Button,{color:\"info\",className:\"elemBarreGauche\",onClick:toggle},buttonLabel),React.createElement(Modal,{isOpen:modal,toggle:toggle,className:className},React.createElement(ModalHeader,{toggle:toggle},\"Formulaire de cr\\xE9ation de r\\xE9union\"),React.createElement(ModalBody,null,React.createElement(\"div\",null,React.createElement(Form,null,React.createElement(FormGroup,null,React.createElement(Label,{for:\"idReunion\"},\"ID R\\xE9union\"),React.createElement(Input,{type:\"text\",name:\"idReunion\",id:\"idReunion\",placeholder:\"A23AZE\",value:idReunion,onChange:onChangeIdReunion})),React.createElement(FormGroup,null,React.createElement(Label,{for:\"Sujet\"},\"Sujet de la r\\xE9union\"),React.createElement(Input,{type:\"text\",name:\"sujet\",id:\"Sujet\",placeholder:\"Le sujet principale de la r\\xE9unison\",value:sujet,onChange:onChangeSujet})),React.createElement(FormGroup,null,React.createElement(Label,{for:\"Email\"},\"Participants\"),React.createElement(Input,{type:\"email\",name:\"participants\",id:\"Email\",placeholder:\"Steph@gmail.com;pascal@hotmail.com\",value:participants,onChange:onChangeMail}))))),React.createElement(ModalFooter,null,React.createElement(Button,{color:\"primary\",onClick:send},\"Enregistrer\"),' ',React.createElement(Button,{color:\"secondary\",onClick:toggle},\"Cancel\"))));};var x=localStorage.getItem(\"idReunion\");var AfficheReunion=/*#__PURE__*/function(_Component){_inherits(AfficheReunion,_Component);function AfficheReunion(){var _this;_classCallCheck(this,AfficheReunion);_this=_possibleConstructorReturn(this,_getPrototypeOf(AfficheReunion).call(this));_this.send=function(e){if(_this.state.participants.length===0){console.log(\"email\",_this.state.participants);localStorage.setItem(\"error\",\"Ajouter les mails des participants\");window.location=\"/reunion\";return;}if(_this.state.idReunion.length===0){localStorage.setItem(\"error\",\"Ajouter un ID pour la réunion\");window.location=\"/reunion\";return;}if(_this.state.sujet.length===0){localStorage.setItem(\"error\",\"Ajouter un sujet pour la réunion\");window.location=\"/reunion\";return;}console.log(\"hahaha\",_this.state.idReunion,_this.state.sujet,_this.state.participants);API.createReunion(_this.state.idReunion,_this.state.sujet,_this.state.participants).then(function(data){console.log(\"hahaha\",data.data);if(data.data.reunion!=null){localStorage.setItem(\"success\",\"Réunion ajouter avec succés\");}else{localStorage.setItem(\"error\",data.data);}return window.location=\"/reunion\";},function(error){localStorage.setItem(\"error\",\"ID réunion existe déjà\");console.log(\"hahaha\",error);window.location=\"/reunion\";return;});return;};_this.deleteReunion=function(e){console.log(\"event:\",e.target.value);API.supprimerMaReunion(e.target.value).then(function(data){console.log(\"hahaha\",data.data);if(data.data!=null){localStorage.setItem(\"success\",\"Réunion supprimer avec succés\");return window.location=\"/reunion\";}},function(error){localStorage.setItem(\"error\",error);console.log(\"hahaha\",error);window.location=\"/reunion\";return;});return;};_this.state={participants:\"\",idReunion:localStorage.getItem(\"idReunionActuelle\"),sujet:localStorage.getItem(\"sujetActuelle\")!=null?localStorage.getItem(\"sujetActuelle\"):_this.lastReunion(localStorage.getItem(\"email\")),createur:localStorage.getItem(\"email\")};if(_this.state.idReunion!=\"\"){_this.setState({data:_this.miseAjourDiscourt(_this.state.idReunion,_this.state.createur)});}else{_this.setState({data:_this.miseAjourDiscourt(null,_this.state.createur)});}_this.onChangeMail=_this.onChangeMail.bind(_assertThisInitialized(_this));_this.onChangeSujet=_this.onChangeSujet.bind(_assertThisInitialized(_this));_this.onChangeIdReunion=_this.onChangeIdReunion.bind(_assertThisInitialized(_this));_this.send=_this.send.bind(_assertThisInitialized(_this));_this.deleteReunion=_this.deleteReunion.bind(_assertThisInitialized(_this));return _this;}_createClass(AfficheReunion,[{key:\"miseAjourDiscourt\",value:function(){var _miseAjourDiscourt=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id,email){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return API.showDiscutionReunion(id,email).then(function(data){console.log(\"data1\",data.data);_this2.setState({data:data.data});console.log(\"data2\",_this2.state.data);if(id==null)x=id;});case 2:case\"end\":return _context.stop();}}},_callee);}));function miseAjourDiscourt(_x,_x2){return _miseAjourDiscourt.apply(this,arguments);}return miseAjourDiscourt;}()},{key:\"lastReunion\",value:function(){var _lastReunion=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email){var _this3=this;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"lastReunion\",email);_context2.next=3;return API.showlastReunion(email).then(function(data){localStorage.setItem(\"sujetActuelle\",data.data.sujet);console.log(\"lastReunion\",data.data.sujet);_this3.setState({sujet:data.data.sujet});return data.data.sujet;});case 3:case\"end\":return _context2.stop();}}},_callee2);}));function lastReunion(_x3){return _lastReunion.apply(this,arguments);}return lastReunion;}()},{key:\"onChangeIdReunion\",value:function onChangeIdReunion(e){this.setState({idReunion:e.target.value});}},{key:\"onChangeSujet\",value:function onChangeSujet(e){this.setState({sujet:e.target.value});}},{key:\"onChangeMail\",value:function onChangeMail(e){this.setState({participants:e.target.value});}},{key:\"componentDidMount\",value:function componentDidMount(){console.log(\"2\",localStorage.getItem(\"success\"));if(localStorage.getItem('success')!=null)this.refs.notify.notificationAlert(options1);if(localStorage.getItem('error')!=null)this.refs.notify.notificationAlert(options2);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){localStorage.removeItem('success');localStorage.removeItem('error');localStorage.removeItem('idReunionActuelle');if(x==this.state.idReunion){this.lastReunion(localStorage.getItem(\"email\"));x=2;}else x=2;}},{key:\"render\",value:function render(){var tab=[];for(var ligne in this.state.data){console.log(\"ligne\",this.state.data[ligne]);tab.push(this.state.data[ligne]);}var i=1;tab.map(function(row){return console.log(\"tab\",row);});return React.createElement(Container,null,React.createElement(NotificationAlert,{ref:\"notify\"}),React.createElement(Row,null,React.createElement(Col,{xs:\"3\",className:\"barreGauche\"},React.createElement(CompteForm,{buttonLabel:\"Créer une nouvelle réunion.\",onChangeIdReunion:this.onChangeIdReunion,onChangeSujet:this.onChangeSujet,onChangeMail:this.onChangeMail,sujet:this.state.sujet,email:this.state.email,idReunion:this.state.idReunion,send:this.send})),React.createElement(Col,{xs:\"9\",className:\"barreDroite \"},React.createElement(Table,{hover:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,this.state.sujet))),React.createElement(\"tbody\",null,tab.map(function(row){return React.createElement(TableDiscution,{row:i++,auteur:row.auteur,phrase:row.phrase,date:row.createdAt});}))))));}}]);return AfficheReunion;}(Component);export{AfficheReunion as default};","map":{"version":3,"sources":["C:/Users/Ouadie/IdeaProjects/SLT/SLT_Front/src/Pages/AfficheReunion.js"],"names":["React","useState","Button","Modal","ModalHeader","ModalBody","ModalFooter","Form","FormGroup","Label","Input","Media","Table","Component","Alert","NotificationAlert","Container","Row","Col","API","ButtonDropdown","DropdownToggle","DropdownMenu","DropdownItem","Avatar","options1","options2","place","message","localStorage","getItem","type","icon","autoDismiss","TableDiscution","props","dropdownOpen","setOpen","toggle","row","auteur","phrase","date","CompteForm","buttonLabel","className","onChangeIdReunion","idReunion","onChangeSujet","sujet","onChangeMail","participants","send","modal","setModal","x","AfficheReunion","e","state","length","console","log","setItem","window","location","createReunion","then","data","reunion","error","deleteReunion","target","value","supprimerMaReunion","lastReunion","createur","setState","miseAjourDiscourt","bind","id","email","showDiscutionReunion","showlastReunion","refs","notify","notificationAlert","removeItem","tab","ligne","push","i","map","createdAt"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport {Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Media,Table} from 'reactstrap';\r\nimport   { Component } from 'react';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport NotificationAlert from 'react-notification-alert';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport \"react-notification-alert/dist/animate.css\";\r\nimport { Container, Row, Col } from 'reactstrap';\r\nimport \"../App.css\";\r\nimport API from \"../Composants/API\";\r\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\r\nimport Avatar from 'react-avatar';\r\nvar options1 = {};\r\nvar options2 = {};\r\noptions1 = {\r\n    place: 'tl',\r\n    message: (\r\n        <div>\r\n            <div>\r\n                {localStorage.getItem(\"success\")}\r\n            </div>\r\n        </div>\r\n    ),\r\n    type: \"success\",\r\n    icon: \"now-ui-icons ui-1_bell-53\",\r\n    autoDismiss: 4\r\n}\r\noptions2 = {\r\n    place: 'tl',\r\n    message: (\r\n        <div>\r\n            <div>\r\n                {localStorage.getItem(\"error\")}\r\n            </div>\r\n        </div>\r\n    ),\r\n    type: \"danger\",\r\n    icon: \"now-ui-icons ui-1_bell-53\",\r\n    autoDismiss: 4\r\n}\r\nconst TableDiscution = (props)=>{\r\n    const [dropdownOpen, setOpen] = useState(false);\r\n\r\n    const toggle = () => setOpen(!dropdownOpen);\r\n\r\n\r\n    const {\r\n        row,\r\n        auteur,phrase,date,\r\n    } = props;\r\n    return <tr>\r\n        <th scope='row' key={row} className=\"container\">\r\n              <div className=\"container\">\r\n\r\n                  <p>  <Avatar facebookId=\"100009606691669\" size=\"50\" />&nbsp;&nbsp;\r\n\r\n                      {auteur} : {phrase}</p>\r\n                 <span className=\"time-right\">{date} </span>\r\n                  </div>\r\n        </th>\r\n    </tr>\r\n}\r\n\r\nconst CompteForm = (props) => {\r\n    const {\r\n        buttonLabel,\r\n        className,onChangeIdReunion,idReunion,onChangeSujet,sujet,onChangeMail,participants,send\r\n    } = props;\r\n\r\n    const [modal, setModal] = useState(false);\r\n\r\n    const toggle = () => setModal(!modal);\r\n\r\n    return (\r\n        <div>\r\n            <Button color=\"info\" className=\"elemBarreGauche\"  onClick={toggle}>{buttonLabel}</Button>\r\n            <Modal isOpen={modal} toggle={toggle} className={className}>\r\n                <ModalHeader toggle={toggle}>Formulaire de création de réunion</ModalHeader>\r\n                <ModalBody>\r\n                    <div>\r\n                        <Form>\r\n                            <FormGroup>\r\n                                <Label for=\"idReunion\">ID Réunion</Label>\r\n                                <Input type=\"text\" name=\"idReunion\" id=\"idReunion\" placeholder=\"A23AZE\" value={idReunion}\r\n                                       onChange={onChangeIdReunion} />\r\n                            </FormGroup>\r\n                            <FormGroup>\r\n                                <Label for=\"Sujet\">Sujet de la réunion</Label>\r\n                                <Input type=\"text\" name=\"sujet\" id=\"Sujet\" placeholder=\"Le sujet principale de la réunison\" value={sujet}\r\n                                       onChange={onChangeSujet} />\r\n                            </FormGroup>\r\n                            <FormGroup>\r\n                                <Label for=\"Email\">Participants</Label>\r\n                                <Input type=\"email\" name=\"participants\" id=\"Email\" placeholder=\"Steph@gmail.com;pascal@hotmail.com\" value={participants}\r\n                                       onChange={onChangeMail} />\r\n                            </FormGroup>\r\n\r\n\r\n                        </Form></div>\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    <Button color=\"primary\" onClick={send}>Enregistrer</Button>{' '}\r\n                    <Button color=\"secondary\" onClick={toggle}>Cancel</Button>\r\n                </ModalFooter>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n\r\nlet x= localStorage.getItem(\"idReunion\");\r\nexport default class AfficheReunion extends Component {\r\n\r\n\r\n\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n\r\n            participants :\"\",\r\n            idReunion:localStorage.getItem(\"idReunionActuelle\"),\r\n            sujet : localStorage.getItem(\"sujetActuelle\") !=null ? localStorage.getItem(\"sujetActuelle\") : this.lastReunion(localStorage.getItem(\"email\")) ,\r\n            createur :localStorage.getItem(\"email\"),\r\n        }\r\n        if(this.state.idReunion !=\"\"){\r\n            this.setState({\r\n                data : this.miseAjourDiscourt(this.state.idReunion,this.state.createur),\r\n             })\r\n        }else{\r\n            this.setState({\r\n                data : this.miseAjourDiscourt(null,this.state.createur),\r\n             })\r\n\r\n        }\r\n\r\n\r\n        this.onChangeMail = this.onChangeMail.bind(this)\r\n        this.onChangeSujet = this.onChangeSujet.bind(this)\r\n        this.onChangeIdReunion = this.onChangeIdReunion.bind(this)\r\n        this.send = this.send.bind(this)\r\n        this.deleteReunion = this.deleteReunion.bind(this)\r\n    }\r\n    async miseAjourDiscourt (id,email) {\r\n        await API.showDiscutionReunion(id,email).then((data)=>{\r\n            console.log(\"data1\",data.data)\r\n            this.setState({\r\n                data: data.data\r\n            })\r\n            console.log(\"data2\",this.state.data)\r\n            if(id==null)  x=id\r\n        })\r\n    }\r\n    async lastReunion (email) {\r\n        console.log(\"lastReunion\",email)\r\n        await API.showlastReunion(email).then((data)=>{\r\n        localStorage.setItem(\"sujetActuelle\",data.data.sujet)\r\n            console.log(\"lastReunion\",data.data.sujet)\r\n            this.setState({\r\n                sujet: data.data.sujet\r\n            })\r\n            return data.data.sujet\r\n        })\r\n    }\r\n    onChangeIdReunion (e) {\r\n        this.setState({\r\n            idReunion: e.target.value\r\n        })\r\n    }\r\n\r\n    onChangeSujet (e) {\r\n        this.setState({\r\n            sujet: e.target.value\r\n        })\r\n    }\r\n    onChangeMail (e) {\r\n        this.setState({\r\n            participants: e.target.value\r\n        })\r\n    }\r\n\r\n\r\n    send =  e => {\r\n\r\n\r\n        if (this.state.participants.length === 0) {\r\n            console.log(\"email\",this.state.participants)\r\n            localStorage.setItem(\"error\", \"Ajouter les mails des participants\");\r\n\r\n            window.location = \"/reunion\"\r\n            return;\r\n        }\r\n        if (this.state.idReunion.length === 0) {\r\n            localStorage.setItem(\"error\", \"Ajouter un ID pour la réunion\");\r\n            window.location = \"/reunion\"\r\n            return;\r\n        }\r\n        if (this.state.sujet.length === 0) {\r\n            localStorage.setItem(\"error\", \"Ajouter un sujet pour la réunion\");\r\n            window.location = \"/reunion\"\r\n            return;\r\n        }\r\n        console.log(\"hahaha\",this.state.idReunion, this.state.sujet,this.state.participants)\r\n        API.createReunion(this.state.idReunion, this.state.sujet,this.state.participants).then(function (data) {\r\n            console.log(\"hahaha\",data.data)\r\n             if(data.data.reunion != null){\r\n                 localStorage.setItem(\"success\",\"Réunion ajouter avec succés\")\r\n\r\n             }else{\r\n                 localStorage.setItem(\"error\",data.data)\r\n             }\r\n\r\n\r\n\r\n\r\n                return window.location = \"/reunion\"\r\n\r\n\r\n\r\n\r\n\r\n    }, function (error ) {\r\n        localStorage.setItem(\"error\",\"ID réunion existe déjà\")\r\n        console.log(\"hahaha\",error)\r\n\r\n       window.location = \"/reunion\"\r\n\r\n        return\r\n    });\r\n\r\n\r\n\r\n\r\n    return  ;\r\n\r\n}\r\n    deleteReunion =  e => {\r\nconsole.log(\"event:\",e.target.value)\r\n\r\n        API.supprimerMaReunion(e.target.value).then(function (data) {\r\n            console.log(\"hahaha\",data.data)\r\n            if(data.data != null){\r\n                localStorage.setItem(\"success\",\"Réunion supprimer avec succés\")\r\n               return window.location = \"/reunion\"\r\n            }\r\n        }, function (error ) {\r\n            localStorage.setItem(\"error\",error)\r\n            console.log(\"hahaha\",error)\r\n\r\n               window.location = \"/reunion\"\r\n\r\n            return\r\n        });\r\n\r\n\r\n\r\n\r\n        return  ;\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n\r\n        console.log(\"2\",localStorage.getItem(\"success\"))\r\n        if(localStorage.getItem('success')!= null) this.refs.notify.notificationAlert(options1);\r\n        if(localStorage.getItem('error')!= null) this.refs.notify.notificationAlert(options2);\r\n    }\r\n    componentDidUpdate() {\r\n        localStorage.removeItem('success')\r\n        localStorage.removeItem('error')\r\n        localStorage.removeItem('idReunionActuelle')\r\n        if(x==this.state.idReunion) {this.lastReunion(localStorage.getItem(\"email\"));x=2}\r\n        else x=2\r\n\r\n\r\n    }\r\n    render () {\r\n        let tab = []\r\n        for(let ligne in this.state.data){\r\n            console.log(\"ligne\",this.state.data[ligne])\r\n            tab.push(this.state.data[ligne])\r\n        }\r\n        let i=1\r\n        tab.map(row => console.log(\"tab\",row) )\r\n\r\n        return (\r\n            <Container>\r\n                <NotificationAlert ref=\"notify\" />\r\n                <Row>\r\n                    <Col xs=\"3\" className=\"barreGauche\">\r\n                         <CompteForm buttonLabel ={\"Créer une nouvelle réunion.\"} onChangeIdReunion={this.onChangeIdReunion} onChangeSujet={this.onChangeSujet} onChangeMail={this.onChangeMail} sujet ={this.state.sujet} email={this.state.email} idReunion={this.state.idReunion} send={this.send} />\r\n\r\n                    </Col>\r\n\r\n                    <Col xs=\"9\" className=\"barreDroite \">\r\n                        <Table hover >\r\n                            <thead>\r\n                            <tr>\r\n                                <th>{this.state.sujet}</th>\r\n\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {\r\n\r\n                                tab.map(row => <TableDiscution row={i++} auteur={row.auteur} phrase={row.phrase} date={row.createdAt}  />)\r\n                            }\r\n                            </tbody>\r\n                        </Table>\r\n\r\n\r\n                    </Col>\r\n                </Row>\r\n\r\n            </Container>\r\n\r\n\r\n        )\r\n    }\r\n\r\n\r\n\r\n\r\n}"]},"metadata":{},"sourceType":"module"}