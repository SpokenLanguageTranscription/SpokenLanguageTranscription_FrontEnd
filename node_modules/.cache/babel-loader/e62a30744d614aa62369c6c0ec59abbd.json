{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Ouadie\\\\IdeaProjects\\\\SLT\\\\SLT_Front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link}from'react-router-dom';import API from'../Composants/API';import\"../App.css\";import NotificationAlert from'react-notification-alert';var options1={};var options2={};options1={place:'tl',message:React.createElement(\"div\",null,React.createElement(\"div\",null,localStorage.getItem(\"success\"))),type:\"success\",icon:\"now-ui-icons ui-1_bell-53\",autoDismiss:4};options2={place:'tl',message:React.createElement(\"div\",null,React.createElement(\"div\",null,localStorage.getItem(\"error\"))),type:\"danger\",icon:\"now-ui-icons ui-1_bell-53\",autoDismiss:4};var x;var Connexion=/*#__PURE__*/function(_Component){_inherits(Connexion,_Component);function Connexion(){var _this;_classCallCheck(this,Connexion);_this=_possibleConstructorReturn(this,_getPrototypeOf(Connexion).call(this));_this.send=function(e){localStorage.clear();if(_this.state.email.length===0){localStorage.setItem(\"error\",\"Ajouter un email\");window.location=\"/inscription\";return;}if(_this.state.password.length===0){localStorage.setItem(\"error\",\"Ajouter un mot de passe\");window.location=\"/connexion\";return;}API.login(_this.state.email,_this.state.password).then(function(data){console.log(\"hahaha\",data.data);localStorage.setItem(\"token\",data.data.token);API.decrypt().then(function(data){localStorage.setItem(\"id\",data.data.id);localStorage.setItem(\"email\",data.data.email);localStorage.setItem(\"username\",data.data.username);localStorage.setItem(\"name\",data.data.name);localStorage.setItem(\"success\",\"vous Ãªtes bien connecter\");x=1;return window.location=\"/Dashboard\";});//window.location = \"/dashboard\"\n},function(error){localStorage.setItem(\"error\",\"mot de pass ou nom d'utilisateur est incorrect\");console.log(\"hahaha\",error);x=2;window.location=\"/connexion\";return;});_this.setState(_objectSpread({},_this.state));///console.log(error);\nif(x==1)window.location=\"/Dashboard\";if(x==2)window.location=\"/connexion\";return;};_this.state={email:'',password:''};_this.onChangeMail=_this.onChangeMail.bind(_assertThisInitialized(_this));_this.onChangePass=_this.onChangePass.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Connexion,[{key:\"onChangeMail\",value:function onChangeMail(e){this.setState({email:e.target.value});}},{key:\"onChangePass\",value:function onChangePass(e){this.setState({password:e.target.value});}},{key:\"onSubmit\",value:function onSubmit(e){e.preventDefault();}},{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem('success')!=null)this.refs.notify.notificationAlert(options1);if(localStorage.getItem('error')!=null)this.refs.notify.notificationAlert(options2);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){localStorage.removeItem('success');localStorage.removeItem('error');}},{key:\"render\",value:function render(){return React.createElement(\"section\",{className:\"Compte\"},React.createElement(NotificationAlert,{ref:\"notify\"}),React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-6 mt-5 mx-auto\"},React.createElement(\"form\",{noValidate:true,onSubmit:this.onSubmit},React.createElement(\"h1\",{className:\"h1\"},\"Connectez vous\"),React.createElement(\"div\",{className:\"form-group col-md-12 mt-5\"},React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"),React.createElement(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",placeholder:\" E-mail\",value:this.state.email,onChange:this.onChangeMail})),React.createElement(\"div\",{className:\"form-group col-md-12 mt-5\"},React.createElement(\"label\",{htmlFor:\"password\"},\"Mot de passe\"),React.createElement(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",placeholder:\"Mot de passe\",value:this.state.password,onChange:this.onChangePass})),React.createElement(\"div\",{className:\"createAccount\"},React.createElement(Link,{to:\"/\"},React.createElement(\"button\",{type:\"submit\",onClick:this.send,className:\"MyButtom\"},\"Authentification\")),React.createElement(Link,{to:\"/RecupPass\",className:\"small-connexion\"},React.createElement(\"small\",{className:\"small-connexion\"},\"Mot de pass oubli\\xE9 ?\")),React.createElement(Link,{to:\"/inscription\",className:\"small-connexion\"},React.createElement(\"small\",{className:\"small-connexion\"},\"Cr\\xE9er un Compte\"))))))));}}]);return Connexion;}(Component);export{Connexion as default};","map":{"version":3,"sources":["C:/Users/Ouadie/IdeaProjects/SLT/SLT_Front/src/Pages/Connexion.js"],"names":["React","Component","Link","API","NotificationAlert","options1","options2","place","message","localStorage","getItem","type","icon","autoDismiss","x","Connexion","send","e","clear","state","email","length","setItem","window","location","password","login","then","data","console","log","token","decrypt","id","username","name","error","setState","onChangeMail","bind","onChangePass","onSubmit","target","value","preventDefault","refs","notify","notificationAlert","removeItem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport  API from '../Composants/API'\r\nimport \"../App.css\";\r\nimport NotificationAlert from 'react-notification-alert';\r\nvar options1 = {};\r\nvar options2 = {};\r\noptions1 = {\r\n    place: 'tl',\r\n    message: (\r\n        <div>\r\n            <div>\r\n                {localStorage.getItem(\"success\")}\r\n            </div>\r\n        </div>\r\n    ),\r\n    type: \"success\",\r\n    icon: \"now-ui-icons ui-1_bell-53\",\r\n    autoDismiss: 4\r\n}\r\noptions2 = {\r\n    place: 'tl',\r\n    message: (\r\n        <div>\r\n            <div>\r\n                {localStorage.getItem(\"error\")}\r\n            </div>\r\n        </div>\r\n    ),\r\n    type: \"danger\",\r\n    icon: \"now-ui-icons ui-1_bell-53\",\r\n    autoDismiss: 4\r\n}\r\nlet x;\r\nexport default class Connexion extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n        }\r\n        this.onChangeMail = this.onChangeMail.bind(this)\r\n        this.onChangePass = this.onChangePass.bind(this)\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n    }\r\n\r\n    onChangeMail (e) {\r\n        this.setState({ \r\n            email: e.target.value\r\n        })\r\n    }\r\n\r\n    onChangePass (e) {\r\n        this.setState({\r\n            password: e.target.value\r\n         })\r\n    }\r\n\r\n    send =  e => {\r\n        localStorage.clear()\r\n\r\n        if (this.state.email.length === 0) {\r\n            localStorage.setItem(\"error\",\"Ajouter un email\")\r\n            window.location = \"/inscription\"\r\n            return;\r\n        }\r\n        if (this.state.password.length === 0) {\r\n            localStorage.setItem(\"error\",\"Ajouter un mot de passe\")\r\n            window.location = \"/connexion\"\r\n            return;\r\n        }\r\n\r\n\r\n        API.login(this.state.email, this.state.password).then(function (data) {\r\n            console.log(\"hahaha\",data.data)\r\n\r\n            localStorage.setItem(\"token\",data.data.token)\r\n              API.decrypt().then((data)=>{\r\n                localStorage.setItem(\"id\",data.data.id)\r\n                localStorage.setItem(\"email\",data.data.email)\r\n                localStorage.setItem(\"username\",data.data.username)\r\n                localStorage.setItem(\"name\",data.data.name)\r\n                localStorage.setItem(\"success\",\"vous Ãªtes bien connecter\")\r\n                x=1;\r\n\r\n\r\n                return window.location = \"/Dashboard\"\r\n            })\r\n\r\n\r\n\r\n\r\n            //window.location = \"/dashboard\"\r\n        }, function (error ) {\r\n            localStorage.setItem(\"error\",\"mot de pass ou nom d'utilisateur est incorrect\")\r\n            console.log(\"hahaha\",error)\r\n            x=2\r\n            window.location = \"/connexion\"\r\n\r\n            return\r\n        });\r\n\r\n\r\n        this.setState({\r\n            ...this.state\r\n        });\r\n        ///console.log(error);\r\n        if(x==1)window.location = \"/Dashboard\"\r\n        if(x==2)window.location = \"/connexion\"\r\n        return  ;\r\n\r\n    }\r\n\r\n    onSubmit (e) {\r\n        e.preventDefault()\r\n\r\n    }\r\n    componentDidMount() {\r\n        if(localStorage.getItem('success')!= null) this.refs.notify.notificationAlert(options1);\r\n        if(localStorage.getItem('error')!= null) this.refs.notify.notificationAlert(options2);\r\n    }\r\n    componentDidUpdate() {\r\n        localStorage.removeItem('success')\r\n        localStorage.removeItem('error')\r\n    }\r\n    render () {\r\n        return (\r\n\r\n            <section className=\"Compte\">\r\n                <NotificationAlert ref=\"notify\" />\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6 mt-5 mx-auto\">\r\n                        <form noValidate onSubmit={this.onSubmit}>\r\n                            <h1 className=\"h1\">Connectez vous</h1>\r\n\r\n\r\n\r\n                            <div  className=\"form-group col-md-12 mt-5\">\r\n                                <label htmlFor=\"email\">Email</label>\r\n                                <input type=\"email\"\r\n                                    className=\"form-control\"\r\n                                    name=\"email\"\r\n                                    placeholder=\" E-mail\"\r\n                                    value={this.state.email}\r\n                                    onChange={this.onChangeMail} />\r\n                            </div>\r\n                            <div className=\"form-group col-md-12 mt-5\">\r\n                                <label htmlFor=\"password\">Mot de passe</label>\r\n                                <input type=\"password\"\r\n                                    className=\"form-control\"\r\n                                    name=\"password\"\r\n                                    placeholder=\"Mot de passe\"\r\n                                    value={this.state.password}\r\n                                    onChange={this.onChangePass} />\r\n                            </div>\r\n                            <div className=\"createAccount\">\r\n\r\n                                <Link to=\"/\">\r\n                                <button type=\"submit\" onClick={this.send} className=\"MyButtom\">Authentification</button>\r\n                                </Link>\r\n                                \r\n                                \r\n                                <Link to=\"/RecupPass\" className=\"small-connexion\">\r\n                                <small className=\"small-connexion\">Mot de pass oubliÃ© ?</small>\r\n                                </Link>\r\n\r\n                                <Link to=\"/inscription\" className=\"small-connexion\">\r\n                                <small className=\"small-connexion\">CrÃ©er un Compte</small>\r\n                                </Link>\r\n\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            </section>\r\n           \r\n        )\r\n    }\r\n\r\n\r\n\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}